# Join a Ministry of Justice GitHub Organisation


[![repo standards badge](https://img.shields.io/endpoint?labelColor=231f20&color=005ea5&style=for-the-badge&label=MoJ%20Compliant&url=https%3A%2F%2Foperations-engineering-reports-prod.cloud-platform.service.justice.gov.uk%2Fapi%2Fv1%2Fcompliant_public_repositories%2Fendpoint%2Foperations-engineering-join-github&logo=data:image/png;base64,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)](https://operations-engineering-reports-prod.cloud-platform.service.justice.gov.uk/public-report/operations-engineering-join-github)

1. [Prerequisites](#prerequisites)
1. [Development](#development)
1. [Deployment](#deployment)

# Overview

Welcome to the GitHub repository for our "Join GitHub" onboarding application. This application streamlines the process of adding new users to our two primary GitHub organisations: ministryofjustice and moj-analytical-services.

The aim of this application is to provide a user-friendly interface for onboarding new team members into our GitHub organisations. It simplifies the administrative process, ensuring a smooth and efficient integration for new users.

## Prerequisites

To develop, deploy or run this app, you will need to install the following:

- [Python 3.11](https://www.python.org/downloads/release/python-3110/)
- [Docker](https://www.docker.com/)
- [Kubectl](https://kubernetes.io/docs/tasks/tools/)
- [Helm](https://kubernetes.io/docs/tasks/tools/](https://helm.sh/docs/intro/install/))

## Development

### Environment setup

Refer to the `.env.example` file for the required variables. Create a `.env` file from this in the project root. Note that `.env` is included in `.gitignore` so it is not tracked. 

```bash
cp .env.example .env
```

To enable the auth0 authentication to run locally requires the actual `AUTH0_CLIENT_ID` and `AUTH0_CLIENT_SECRET` (by default set to `dev`). To access these login to auth0 and go to the operations-engineering tenant then,

Applications -> Applications -> `ops-eng-test-azure-ad` 

Copy the Client ID and the Client Secret into your `.env`. Then source the `.env` and proceed.

```bash
source .env
```

### Run application from Terminal

To run the application locally from the terminal use:

```bash
make local
```

Then open a browser to `http://127.0.0.1:4567`.

To use Docker run the following command and open a browser to `http://0.0.0.0:4567`:

```bash
make docker-up
```
 



### Linting

To run the linter, run the following command:

```bash
make lint
```

Our project employs MegaLinter in our GitHub Actions to automatically ensure code quality on every pull request. It performs extensive linting across various languages and file formats, including Python, Bash, Markdown, Dockerfiles, JSON, Kubernetes configurations, and YAML. Configured in the .github/workflows/ directory, MegaLinter helps identify issues early, enforcing best practices and style guidelines.

### Testing

To run the tests, run the following command:

```bash
make test
```

## Deployment

### Tokens and Secrets

All necessary tokens and secrets required for the deployment processes are manually set in the GitHub repository secrets. These include access tokens for various services and sensitive configuration data.

### Deployment Pipelines

This project utilises two separate deployment pipelines:

#### Development Deployment Pipeline

To deploy to the `operations-engineering-join-github-dev` namespace, use the following steps:

1. Ensure your changes are committed to the `main` branch through the relevant pull request process.
2. The pipeline will automatically deploy the latest commit SHA to the development namespace using the Helm chart located in `helm/join-github`.

#### Production Deployment Pipeline

To deploy the latest tag push to GitHub in the production environment, follow these steps:

1. Clone the repository and ensure you have the latest updates from the `main` branch.
2. Create a new tag using the Git tagging system. For example, to create tag v0.0.1, run:

   ```bash
   git tag v0.0.1
   ```

> When creating a new tag, use semantic versioning (e.g., `v1.0.0`, `v1.0.1`). This practice helps in maintaining version control and understanding the nature of the changes (major, minor, or patch).

3. Push the tag to the repository:

    ```bash
    git push --tags
    ```

4. The pipeline will automatically deploy the application to the `operations-engineering-join-github-prod` namespace.

### Development environment

The Cloud Platform namespace for this project is called `operations-engineering-join-github-dev`.

You can see the development app running at: https://join-github-dev.cloud-platform.service.justice.gov.uk/

And access Cloud Platform's namespace using:

```bash
kubectl get pods -n operations-engineering-join-github-dev
```

### Production environment

The Cloud Platform namespace for the production environment is `operations-engineering-join-github-prod`.

You can see the production app running at: https://join-github.cloud-platform.service.justice.gov.uk/

To interact with the production environment, use kubectl commands. For example:

```bash
kubectl get pods -n operations-engineering-join-github-prod
```

## Contributing

Pull requests are welcome. For major changes, please open an issue first to discuss what you want to change.

Please make sure to update tests as appropriate.

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Contact Us

If you have any questions or need further clarification, feel free to ask in the #ask-operations-engineering channel on
Slack or email us at operations-engineering@digital.justice.gov.uk.
