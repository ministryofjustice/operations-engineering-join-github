# Operations Engineering Join GitHub

> ⚠️ **Please do not deploy this application to production** - read
> the [Web Application Security Assessment](./docs/web-application-security-assessment.md) for more information.

1. [Prerequisites](#prerequisites)
1. [Development](#development)
1. [Deployment](#deployment)

## Prerequisites

To develop, deploy or run this app, you will need to install the following:

- [Python 3.11](https://www.python.org/downloads/release/python-3110/)
- [Docker](https://www.docker.com/)
- [Kubectl](https://kubernetes.io/docs/tasks/tools/)

## Development

### Environment setup

Set up the necessary environment variables. Refer to the .env.example file for the required format and variables. Create a .env file in the project root with the necessary configurations:

```bash
cp .env.example .env
# Edit .env to add the required configurations
```

### Run application within Terminal

Run the application locally from the terminal.

```bash
make local
```

Open a browser to http://127.0.0.1:4567

### Linting

To run the linter, run the following command:

```bash
make lint
```

### Testing

To run the tests, run the following command:

```bash
make test
```

### Formatting

To run the formatter, run the following command:

```bash
make format
```

## Deployment

#### Tokens

The tokens required to access the (Cloud Platform) cluster are generated by the [cloud-platform-environments repository](https://github.com/ministryofjustice/cloud-platform-environments). These tokens are then populated into GitHub Actions Secrets, which are consumed through GitHub Actions. The tokens are prefixed with the environment name, allowing for easy reference in the format `<environment>_<secret>`.

For example, to reference a secret in the development environment, you would use `DEV_<secret>`.

### Development environment

The Cloud Platform namespace for this project is called `operations-engineering-join-github-dev`.

You can see the development app running
at: https://operations-engineering-join-github-dev.cloud-platform.service.justice.gov.uk/

And access Cloud Platform's namespace using:

```bash
kubectl get pods -n operations-engineering-join-github-dev
```

### Production environment

The Cloud Platform namespace for the production environment is `operations-engineering-join-github-prod`.

To interact with the production environment, use kubectl commands. For example:

```bash
kubectl get pods -n operations-engineering-join-github-prod
```

This will list the pods running in the production environment.

## Contributing

Pull requests are welcome. For major changes, please open an issue first to discuss what you want to change.

Please make sure to update tests as appropriate.

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Contact Us

If you have any questions or need further clarification, feel free to ask in the #ask-operations-engineering channel on
Slack or email us at operations-engineering@digital.justice.gov.uk.
